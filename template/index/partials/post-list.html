{{ $ContentType := "" }}
{{ $CurrentPage := 1 }}
{{ $Total := 0 }}
{{ $Size :=10 }}

{{ if $.ContentType }}
{{ $ContentType = $.ContentType }}
{{ end }}

{{ if .Query  }}
{{ $CurrentPage = .Query.page }}
{{ end }}

{{ if .Data }}
{{ $Total = .Data.Total }}
{{ $Size = .Data.Size }}
{{ end }}

{{ if gt .Data.Total 0 }}
<div class="Box">
  <div class="Box-header">
    <div class="sort-list">
      <a class="sort-item mr-2 {{ if eq .Query.sort `` }}text-primary{{ else }}text-gray{{ end }}"
        href="/{{ $ContentType }}?cate={{ .Query.cate }}&sort=">默认</a>
      <a class="sort-item mr-2 {{ if eq .Query.sort 0 }}text-primary{{ else }}text-gray{{ end }}"
        href="/{{ $ContentType }}?cate={{ .Query.cate }}&sort=0">最新</a>
      <a class="sort-item mr-2 {{ if eq .Query.sort 1 }}text-primary{{ else }}text-gray{{ end }}"
        href="/{{ $ContentType }}?cate={{ .Query.cate }}&sort=1">活跃</a>
      <a class="sort-item mr-2 {{ if eq .Query.sort 2 }}text-primary{{ else }}text-gray{{ end }}"
        href="/{{ $ContentType }}?cate={{ .Query.cate }}&sort=2">热度</a>
    </div>
  </div>
  <div class="Box-body">
    {{ range $index, $item := .Data.List }}
    <article class="post-item">
      <div class="d-flex flex-items-baseline py-3 px-md-3">
        <div class="d-flex flex-column width-full">
          <div class="post-item--meta">
            <span class="mr-1">
              <a class="d-inline-block" href="/user/{{ $item.User.Id }}">
                <img class="avatar avatar-user" src="{{ $item.User.Avatar }}" width="24" height="24"
                  alt="@{{ $item.User.Nickname }}">
              </a>
            </span>
            <a class="link-gray-dark wb-break-all d-inline-block"
              href="/user/{{ $item.User.Id }}">{{ $item.User.Nickname }}</a>
            发表在
            <a class="link-gray-dark wb-break-all d-inline-block"
              href="/?cate={{ $item.Category.Id }}">{{ $item.Category.Name }}</a>

            <span class="f6 text-gray-light no-wrap ml-1">
              <time-ago datetime="{{ $item.Content.CreatedAt }}"></time-ago>
            </span>
          </div>

          <div class="pt-3">
            <div class="f4 lh-condensed text-bold text-gray-dark">
              <a class="link-gray-dark wb-break-all d-inline-block"
                href="/{{ $item.Category.ContentType }}/{{ $item.Content.Id }}">{{ $item.Content.Title }}</a>
            </div>

            {{ if $item.Content.Brief }}
            <div class="text-gray mt-1">{{ $item.Content.Brief }}</div>
            {{ end }}

            <p class="f6 text-gray text-right mt-3 mb-0">
              <span class="d-inline-block mr-3">
                <svg class="octicon mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill='currentColor'
                  width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z">
                  </path>
                </svg>
                {{ $item.Content.ViewCount }}
              </span>
              <span class="d-inline-block mr-3">
                <svg class="octicon mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill='currentColor'
                  width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.75 2.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 01.75.75v2.19l2.72-2.72a.75.75 0 01.53-.22h4.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25H2.75zM1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0113.25 12H9.06l-2.573 2.573A1.457 1.457 0 014 13.543V12H2.75A1.75 1.75 0 011 10.25v-7.5z">
                  </path>
                </svg>
                {{ $item.Content.ReplyCount }}
              </span>
              <span class="d-inline-block mr-3">
                <svg class="octicon mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill='currentColor'
                  width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M8.834.066C7.494-.087 6.5 1.048 6.5 2.25v.5c0 1.329-.647 2.124-1.318 2.614-.328.24-.66.403-.918.508A1.75 1.75 0 002.75 5h-1A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h1a1.75 1.75 0 001.662-1.201c.525.075 1.067.229 1.725.415.152.043.31.088.475.133 1.154.32 2.54.653 4.388.653 1.706 0 2.97-.153 3.722-1.14.353-.463.537-1.042.668-1.672.118-.56.208-1.243.313-2.033l.04-.306c.25-1.869.265-3.318-.188-4.316a2.418 2.418 0 00-1.137-1.2C13.924 5.085 13.353 5 12.75 5h-1.422l.015-.113c.07-.518.157-1.17.157-1.637 0-.922-.151-1.719-.656-2.3-.51-.589-1.247-.797-2.01-.884zM4.5 13.3c.705.088 1.39.284 2.072.478l.441.125c1.096.305 2.334.598 3.987.598 1.794 0 2.28-.223 2.528-.549.147-.193.276-.505.394-1.07.105-.502.188-1.124.295-1.93l.04-.3c.25-1.882.189-2.933-.068-3.497a.922.922 0 00-.442-.48c-.208-.104-.52-.174-.997-.174H11c-.686 0-1.295-.577-1.206-1.336.023-.192.05-.39.076-.586.065-.488.13-.97.13-1.328 0-.809-.144-1.15-.288-1.316-.137-.158-.402-.304-1.048-.378C8.357 1.521 8 1.793 8 2.25v.5c0 1.922-.978 3.128-1.933 3.825a5.861 5.861 0 01-1.567.81V13.3zM2.75 6.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1z">
                  </path>
                </svg>
                {{ $item.Content.ZanCount }}
              </span>
              <span class="d-inline-block mr-3">
                <svg class="octicon mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill='currentColor'
                  width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M7.083 15.986c1.34.153 2.334-.982 2.334-2.183v-.5c0-1.329.646-2.123 1.317-2.614.329-.24.66-.403.919-.508a1.75 1.75 0 001.514.872h1a1.75 1.75 0 001.75-1.75v-7.5a1.75 1.75 0 00-1.75-1.75h-1a1.75 1.75 0 00-1.662 1.2c-.525-.074-1.068-.228-1.726-.415L9.305.705C8.151.385 6.765.053 4.917.053c-1.706 0-2.97.152-3.722 1.139-.353.463-.537 1.042-.669 1.672C.41 3.424.32 4.108.214 4.897l-.04.306c-.25 1.869-.266 3.318.188 4.316.244.537.622.943 1.136 1.2.495.248 1.066.334 1.669.334h1.422l-.015.112c-.07.518-.157 1.17-.157 1.638 0 .921.151 1.718.655 2.299.512.589 1.248.797 2.011.884zm4.334-13.232c-.706-.089-1.39-.284-2.072-.479a63.914 63.914 0 00-.441-.125c-1.096-.304-2.335-.597-3.987-.597-1.794 0-2.28.222-2.529.548-.147.193-.275.505-.393 1.07-.105.502-.188 1.124-.295 1.93l-.04.3c-.25 1.882-.19 2.933.067 3.497a.921.921 0 00.443.48c.208.104.52.175.997.175h1.75c.685 0 1.295.577 1.205 1.335-.022.192-.049.39-.075.586-.066.488-.13.97-.13 1.329 0 .808.144 1.15.288 1.316.137.157.401.303 1.048.377.307.035.664-.237.664-.693v-.5c0-1.922.978-3.127 1.932-3.825a5.862 5.862 0 011.568-.809V2.754zm1.75 6.798a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-1z">
                  </path>
                </svg>
                {{ $item.Content.CaiCount }}
              </span>
            </p>
          </div>

        </div>
      </div>
    </article>
    {{ end }}
  </div>
  <div class="Box-footer">
    <gf-paginate class="js-paginate-container my-0" total="{{ $Total }}" limit="{{ $Size }}"
      url="/{{ $ContentType }}?cate={{ .Query.cate }}&sort={{ .Query.sort }}&page=%s" current="{{ $CurrentPage }}">
    </gf-paginate>
  </div>
</div>
{{ else }}
<div class="blankslate">
  <img src="" alt="" class="mb-3" />
  <h3 class="mb-1">暂无相关分类文章</h3>
  <a class="btn btn-primary my-3" href="/content/create?type=article" type="button">立即创建</a>
</div>
{{ end }}
